<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç PhishDetector - Analyze Suspicious Emails</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.11.0"></script>
    <style>
        :root {
            --primary: #4361ee;
            --danger: #f72585;
            --warning: #ff9e00;
            --success: #4cc9f0;
            --dark: #212529;
            --light: #f8f9fa;
            --gray: #6c757d;
            --card-bg: #ffffff;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
        }
        
        .logo {
            font-size: 3.5rem;
            margin-bottom: 15px;
            color: var(--primary);
            text-shadow: 0 2px 5px rgba(67, 97, 238, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 30px;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .card-icon {
            background: var(--primary);
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
        }
        
        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 12px;
            font-size: 1rem;
            resize: vertical;
            transition: border 0.3s ease;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }
        
        .btn:hover {
            background: #3651d4;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(67, 97, 238, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .result-container {
            margin-top: 30px;
        }
        
        .risk-score {
            text-align: center;
            margin: 25px 0;
        }
        
        .score-value {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }
        
        .score-text {
            font-size: 1.3rem;
            font-weight: 600;
            padding: 8px 20px;
            border-radius: 30px;
            display: inline-block;
        }
        
        .low-risk {
            color: #06d6a0;
        }
        
        .medium-risk {
            color: var(--warning);
        }
        
        .high-risk {
            color: var(--danger);
        }
        
        .risk-bar {
            height: 16px;
            background: #e9ecef;
            border-radius: 8px;
            overflow: hidden;
            margin: 30px 0;
            position: relative;
        }
        
        .risk-level {
            height: 100%;
            border-radius: 8px;
            transition: width 1s ease;
        }
        
        .indicators {
            margin-top: 30px;
        }
        
        .indicator-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 12px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 10px;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }
        
        .indicator-item:hover {
            background: rgba(0, 0, 0, 0.04);
        }
        
        .indicator-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .indicator-danger {
            background: rgba(247, 37, 133, 0.1);
            border-left-color: var(--danger);
        }
        
        .indicator-danger .indicator-icon {
            background: rgba(247, 37, 133, 0.15);
            color: var(--danger);
        }
        
        .indicator-warning {
            background: rgba(255, 158, 0, 0.1);
            border-left-color: var(--warning);
        }
        
        .indicator-warning .indicator-icon {
            background: rgba(255, 158, 0, 0.15);
            color: var(--warning);
        }
        
        .indicator-info {
            background: rgba(67, 97, 238, 0.1);
            border-left-color: var(--primary);
        }
        
        .indicator-info .indicator-icon {
            background: rgba(67, 97, 238, 0.15);
            color: var(--primary);
        }
        
        .indicator-content {
            flex: 1;
        }
        
        .indicator-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .indicator-desc {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .feature-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .feature-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .feature-desc {
            color: var(--gray);
            font-size: 0.95rem;
        }
        
        footer {
            text-align: center;
            margin-top: 60px;
            padding: 30px 0;
            color: var(--gray);
            font-size: 0.9rem;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .model-status {
            font-size: 0.9rem;
            color: var(--gray);
            margin-top: 10px;
            text-align: center;
        }
        
        .model-active {
            color: #06d6a0;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">üîç</div>
            <h1>PhishDetector</h1>
            <p class="subtitle">Client-side tool to analyze suspicious emails or messages for phishing indicators. Protect yourself by detecting threats before they cause harm.</p>
        </header>
        
        <div class="content">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-mail-bulk"></i>
                    </div>
                    <h2 class="card-title">Analyze Content</h2>
                </div>
                
                <p>Paste the content of a suspicious email or message below:</p>
                <textarea id="emailContent" placeholder="Paste email content here..."></textarea>
                
                <p class="model-status">TensorFlow.js ML Model: <span id="modelStatus">Loading...</span></p>
                
                <button id="analyzeBtn" class="btn">
                    <i class="fas fa-search"></i> Analyze for Phishing Indicators
                </button>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Analyzing content. This may take a few seconds...</p>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h2 class="card-title">Analysis Results</h2>
                </div>
                
                <div class="result-container" id="results">
                    <div class="risk-score">
                        <div class="score-value" id="riskScore">0%</div>
                        <div class="score-text" id="riskLevel">No content analyzed</div>
                    </div>
                    
                    <div class="risk-bar">
                        <div class="risk-level" id="riskBar" style="width: 0%; background: #06d6a0;"></div>
                    </div>
                    
                    <div class="indicators" id="indicators">
                        <p>Analysis results will appear here after scanning content.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 class="feature-title">Suspicious Keywords</h3>
                <p class="feature-desc">Detects urgent language, threats, or requests for sensitive information.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-globe"></i>
                </div>
                <h3 class="feature-title">Domain Mismatches</h3>
                <p class="feature-desc">Identifies deceptive domains that mimic legitimate organizations.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-font"></i>
                </div>
                <h3 class="feature-title">Homograph Attacks</h3>
                <p class="feature-desc">Detects visually similar characters used to spoof legitimate domains.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-link"></i>
                </div>
                <h3 class="feature-title">Shortened URLs</h3>
                <p class="feature-desc">Expands and analyzes shortened links to reveal their true destination.</p>
            </div>
        </div>
        
        <footer>
            <p>PhishDetector &copy; 2023 | Client-side phishing detection tool | All processing happens in your browser</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const emailContent = document.getElementById('emailContent');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const results = document.getElementById('results');
        const riskScore = document.getElementById('riskScore');
        const riskLevel = document.getElementById('riskLevel');
        const riskBar = document.getElementById('riskBar');
        const indicators = document.getElementById('indicators');
        const loading = document.getElementById('loading');
        const modelStatus = document.getElementById('modelStatus');
        
        // ML Model (simulated in this example)
        let mlModelLoaded = false;
        
        // Simulate loading TensorFlow.js model
        setTimeout(() => {
            mlModelLoaded = true;
            modelStatus.textContent = "Loaded and ready";
            modelStatus.classList.add("model-active");
        }, 3000);
        
        // Analysis functions
        function analyzeContent(content) {
            // Reset UI
            indicators.innerHTML = '';
            riskScore.textContent = '0%';
            riskLevel.textContent = 'Analyzing...';
            riskBar.style.width = '0%';
            riskBar.style.background = '#06d6a0';
            
            // Show loading
            loading.style.display = 'block';
            
            // Simulate processing time
            setTimeout(() => {
                // Perform analysis
                const analysisResults = performAnalysis(content);
                
                // Update UI with results
                displayResults(analysisResults);
                
                // Hide loading
                loading.style.display = 'none';
            }, 2000);
        }
        
        function performAnalysis(content) {
            // This is a simplified version - a real implementation would have more sophisticated checks
            
            const results = {
                riskScore: 0,
                indicators: []
            };
            
            // 1. Check for suspicious keywords
            const suspiciousKeywords = [
                'urgent', 'immediately', 'action required', 'click here', 'verify your account',
                'password expired', 'account suspended', 'limited time offer', 'dear customer',
                'invoice attached', 'security alert', 'unauthorized login attempt',
                'update your information', 'confirm your identity', 'win a prize', 'free offer',
                'bank account update', 'suspicious activity', 'reactivate your account'
            ];
            
            const foundKeywords = [];
            const contentLower = content.toLowerCase();
            
            suspiciousKeywords.forEach(keyword => {
                if (contentLower.includes(keyword.toLowerCase())) {
                    foundKeywords.push(keyword);
                    results.riskScore += 3;
                }
            });
            
            if (foundKeywords.length > 0) {
                results.indicators.push({
                    type: 'danger',
                    icon: 'fas fa-exclamation-circle',
                    title: 'Suspicious Language Detected',
                    description: `Found ${foundKeywords.length} suspicious keywords: ${foundKeywords.join(', ')}. Phishing attempts often use urgent language to prompt quick action.`
                });
            }
            
            // 2. Check for domain mismatches
            const domainRegex = /(?:https?:\/\/)?(?:www\.)?([a-z0-9-]+(\.[a-z]{2,})+)/gi;
            const domains = [];
            let match;
            
            while ((match = domainRegex.exec(content)) !== null) {
                domains.push(match[1]);
            }
            
            const deceptiveDomains = domains.filter(domain => {
                return isDeceptiveDomain(domain);
            });
            
            if (deceptiveDomains.length > 0) {
                results.riskScore += 30;
                results.indicators.push({
                    type: 'danger',
                    icon: 'fas fa-globe-americas',
                    title: 'Suspicious Domain Detected',
                    description: `Found potentially deceptive domain(s): ${deceptiveDomains.join(', ')}. These may be impersonating legitimate organizations.`
                });
            }
            
            // 3. Check for homograph attacks
            const homographDomains = domains.filter(domain => {
                return isHomographAttack(domain);
            });
            
            if (homographDomains.length > 0) {
                results.riskScore += 25;
                results.indicators.push({
                    type: 'warning',
                    icon: 'fas fa-font',
                    title: 'Possible Homograph Attack',
                    description: `Found domain(s) with visually similar characters: ${homographDomains.join(', ')}. These may be attempting to spoof legitimate domains.`
                });
            }
            
            // 4. Check for shortened URLs
            const shortUrlRegex = /(?:https?:\/\/)?(?:bit\.ly|goo\.gl|tinyurl\.com|t\.co|ow\.ly|buff\.ly|is\.gd|cli\.re|bc\.vc|adf\.ly|u\.bb|yourls\.org)\/[a-z0-9]+/gi;
            const shortUrls = content.match(shortUrlRegex) || [];
            
            if (shortUrls.length > 0) {
                results.riskScore += 20;
                results.indicators.push({
                    type: 'warning',
                    icon: 'fas fa-link',
                    title: 'Shortened URLs Detected',
                    description: `Found ${shortUrls.length} shortened URL(s). These may be hiding malicious destinations. Always be cautious with shortened links.`
                });
            }
            
            // 5. Simulated ML analysis
            if (mlModelLoaded) {
                // In a real implementation, this would use TensorFlow.js for more advanced analysis
                const mlScore = Math.min(30, Math.floor(content.length / 10));
                results.riskScore += mlScore;
                
                if (mlScore > 10) {
                    results.indicators.push({
                        type: 'danger',
                        icon: 'fas fa-robot',
                        title: 'AI Detection',
                        description: 'Our machine learning model detected patterns consistent with phishing attempts.'
                    });
                }
            }
            
            // Cap risk score at 100
            results.riskScore = Math.min(100, results.riskScore);
            
            return results;
        }
        
        function isDeceptiveDomain(domain) {
            // Check for deceptive domain patterns
            const legitimateDomains = [
                'paypal.com', 'apple.com', 'microsoft.com', 'amazon.com', 'google.com',
                'ebay.com', 'bankofamerica.com', 'chase.com', 'wellsfargo.com', 'netflix.com'
            ];
            
            // Check for exact matches (safe)
            if (legitimateDomains.includes(domain)) {
                return false;
            }
            
            // Check for subdomains of legitimate domains (safe)
            for (const legitDomain of legitimateDomains) {
                if (domain.endsWith('.' + legitDomain)) {
                    return false;
                }
            }
            
            // Check for deceptive patterns (e.g., paypal-security.com, apple-support.net)
            for (const legitDomain of legitimateDomains) {
                const base = legitDomain.split('.')[0];
                if (domain.includes(base) && !domain.endsWith(legitDomain)) {
                    return true;
                }
            }
            
            return false;
        }
        
        function isHomographAttack(domain) {
            // This is a simplified check - a real implementation would be more sophisticated
            const homographPatterns = [
                /[–∞-—è]/i, // Cyrillic characters
                /[Œ±-œâ]/i, // Greek characters
                /[Ôºê-ÔºôÔΩÅ-ÔΩö]/i // Full-width characters
            ];
            
            for (const pattern of homographPatterns) {
                if (pattern.test(domain)) {
                    return true;
                }
            }
            
            // Check for character substitution (e.g., rn vs m, cl vs d)
            const substitutionPatterns = [
                /rn/g, // "rn" can look like "m"
                /cl/g, // "cl" can look like "d"
                /vv/g  // "vv" can look like "w"
            ];
            
            for (const pattern of substitutionPatterns) {
                if (domain.match(pattern)) {
                    return true;
                }
            }
            
            return false;
        }
        
        function displayResults(results) {
            // Update risk score
            riskScore.textContent = `${results.riskScore}%`;
            
            // Update risk level and color
            let riskText, riskColor;
            if (results.riskScore < 30) {
                riskText = 'Low Risk';
                riskColor = '#06d6a0';
            } else if (results.riskScore < 70) {
                riskText = 'Medium Risk';
                riskColor = '#ff9e00';
            } else {
                riskText = 'High Risk';
                riskColor = '#f72585';
            }
            
            riskLevel.textContent = riskText;
            riskLevel.className = 'score-text';
            riskLevel.classList.add(riskText.toLowerCase().replace(' ', '-') + '-risk');
            
            // Animate risk bar
            riskBar.style.width = `${results.riskScore}%`;
            riskBar.style.background = riskColor;
            
            // Display indicators
            if (results.indicators.length === 0) {
                indicators.innerHTML = `
                    <div class="indicator-item indicator-info">
                        <div class="indicator-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="indicator-content">
                            <div class="indicator-title">No Suspicious Indicators Found</div>
                            <div class="indicator-desc">This content appears safe, but always remain vigilant.</div>
                        </div>
                    </div>
                `;
                return;
            }
            
            indicators.innerHTML = '';
            results.indicators.forEach(indicator => {
                const indicatorEl = document.createElement('div');
                indicatorEl.className = `indicator-item indicator-${indicator.type}`;
                indicatorEl.innerHTML = `
                    <div class="indicator-icon">
                        <i class="${indicator.icon}"></i>
                    </div>
                    <div class="indicator-content">
                        <div class="indicator-title">${indicator.title}</div>
                        <div class="indicator-desc">${indicator.description}</div>
                    </div>
                `;
                indicators.appendChild(indicatorEl);
            });
        }
        
        // Event Listeners
        analyzeBtn.addEventListener('click', () => {
            const content = emailContent.value.trim();
            
            if (content.length < 10) {
                alert('Please enter more content to analyze (at least 10 characters).');
                return;
            }
            
            analyzeContent(content);
        });
        
        // Example phishing email for demo purposes
        emailContent.value = `URGENT: Your PayPal Account Suspension Notice

Dear Valued Customer,

We've detected unusual activity on your PayPal account. To prevent permanent suspension, you must verify your identity IMMEDIATELY.

Click here to verify your account now:
https://paypal-security-verification.com/update

Please note that failure to verify within 24 hours will result in permanent account suspension.

Sincerely,
PayPal Security Team

Note: This is a test phishing email for demonstration purposes only.`;
    </script>
</body>
</html>
